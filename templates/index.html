{% extends "base.html" %}
{% block title %}Welcome{% endblock %}
{% block content %}
<div class="container mx-auto mt-5">
    <div class="bg-white p-8 rounded-lg shadow-md text-center">
        <h1 class="text-4xl font-bold mb-4">Welcome to Our Service!</h1>
        <p class="text-lg mb-4">We provide top-notch solutions for your business needs.</p>
        <hr class="my-4">
        <p class="mb-4">Explore our services and see how we can help you grow.</p>
        <div class="space-x-4">
            <a class="inline-block bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600" href="{{ url_for('companies_list') }}" role="button">
                <i class="fas fa-building"></i> View Companies
            </a>
            <a class="inline-block bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600" href="{{ url_for('pricing') }}" role="button">
                <i class="fas fa-tags"></i> Check Pricing
            </a>
        </div>
    </div>

    <div class="flex justify-end my-4">
        {% if current_user.is_authenticated %}
            <a href="/profile" class="bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600"><i class="fas fa-user"></i> Profile</a>
            <a href="/logout" class="bg-red-500 text-white py-2 px-4 ml-2 rounded hover:bg-red-600"><i class="fas fa-sign-out-alt"></i> Logout</a>
        {% else %}
            <a href="/login" class="bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600"><i class="fas fa-sign-in-alt"></i> Login</a>
        {% endif %}
    </div>

    <form method="GET" action="/" class="mb-4">
        <div class="flex mb-4">
            <input type="text" class="flex-grow p-2 border rounded-l-md" placeholder="Search by Company Name or INN" name="query" value="{{ request.args.get('query', '') }}">
            <button class="bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-r-md" type="submit">
                <i class="fas fa-search"></i> Search
            </button>
        </div>
        <button class="text-blue-500 hover:text-blue-700 mb-2" type="button" data-toggle="collapse" data-target="#advancedSearch" aria-expanded="false" aria-controls="advancedSearch">
            <i class="fas fa-filter"></i> Advanced Search
        </button>
        <div class="collapse" id="advancedSearch">
            <div class="bg-white p-4 rounded-lg shadow-md">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <div>
                        <input type="text" class="w-full p-2 border rounded" id="company-name" placeholder="Company Name" name="name" value="{{ request.args.get('name', '') }}">
                    </div>
                    <div>
                        <input type="text" class="w-full p-2 border rounded" placeholder="INN" name="inn" value="{{ request.args.get('inn', '') }}">
                    </div>
                    <div>
                        <input type="text" class="w-full p-2 border rounded datepicker" placeholder="Registered Date" name="date" value="{{ request.args.get('date', '') }}">
                    </div>
                    <div>
                        <input type="text" class="w-full p-2 border rounded" id="authorized-body" placeholder="Authorized Body" name="body" value="{{ request.args.get('body', '') }}">
                    </div>
                    <div>
                        <select class="w-full p-2 border rounded" name="status">
                            <option value="">Select Activity Status</option>
                            <option value="Faoliyat ko`rsatayotgan" {% if request.args.get('status') == 'Faoliyat ko`rsatayotgan' %}selected{% endif %}>Faoliyat ko`rsatayotgan</option>
                            <option value="Faoliyat ko`rsatmayotgan" {% if request.args.get('status') == 'Faoliyat ko`rsatmayotgan' %}selected{% endif %}>Faoliyat ko`rsatmayotgan</option>
                        </select>
                    </div>
                </div>
                <button type="submit" class="mt-4 bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600"><i class="fas fa-search"></i> Search</button>
            </div>
        </div>
    </form>

    <h2 class="mt-5 mb-4 text-2xl font-semibold"><i class="fas fa-list"></i> Company List</h2>
    <table class="table-auto w-full bg-white shadow-md rounded-lg">
        <thead class="bg-gray-800 text-white">
            <tr>
                <th class="px-4 py-2">INN</th>
                <th class="px-4 py-2">Company Name</th>
                <th class="px-4 py-2">Details</th>
            </tr>
        </thead>
        <tbody>
            {% for company in companies %}
            <tr class="bg-gray-100 border-b">
                <td class="px-4 py-2">{{ company['INN'] }}</td>
                <td class="px-4 py-2">{{ company['Yuridik shaxsning nomi'] }}</td>
                <td class="px-4 py-2 text-center">
                    <a href="{{ url_for('company_detail', company_id=loop.index0) }}" class="bg-blue-500 text-white py-1 px-3 rounded hover:bg-blue-600">
                        <i class="fas fa-info-circle"></i> View Details
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% if not companies %}
    <p class="text-center mt-4">No companies found.</p>
    {% endif %}
</div>
{% endblock %}
